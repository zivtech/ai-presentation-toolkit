{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/zivtech/ai-presentation-toolkit/content.schema.json",
  "title": "ContentDocument",
  "description": "Intermediate representation of presentation content for the ai-presentation-toolkit pipeline.",
  "type": "object",
  "required": ["version", "metadata", "slides"],
  "properties": {
    "version": {
      "type": "string",
      "const": "1.0",
      "description": "Schema version"
    },
    "metadata": {
      "$ref": "#/$defs/ContentMetadata"
    },
    "slides": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/$defs/Slide"
      }
    }
  },
  "additionalProperties": false,
  "$defs": {
    "ContentMetadata": {
      "type": "object",
      "required": ["source_file", "source_format"],
      "properties": {
        "source_file": {
          "type": "string",
          "description": "Original input filename"
        },
        "source_format": {
          "type": "string",
          "enum": ["pptx", "pdf", "markdown", "csv", "manual"],
          "description": "Format of the original input"
        },
        "generated_at": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of generation"
        },
        "generator": {
          "type": "string",
          "description": "Tool or process that generated this document"
        }
      },
      "additionalProperties": false
    },
    "ContentType": {
      "type": "string",
      "enum": [
        "auto",
        "statistic",
        "stats_dashboard",
        "quote",
        "numbered_step",
        "bullet_list",
        "comparison",
        "section_header",
        "case_study",
        "case_study_full",
        "statement",
        "feature",
        "detailed_content",
        "title_opening",
        "closing"
      ]
    },
    "ImagePlacement": {
      "type": "string",
      "enum": ["auto", "background", "left", "right", "center", "inline"]
    },
    "SlideImage": {
      "type": "object",
      "required": ["path"],
      "properties": {
        "path": {
          "type": "string",
          "description": "Path to the image file"
        },
        "width": {
          "type": "integer",
          "minimum": 0,
          "description": "Image width in pixels"
        },
        "height": {
          "type": "integer",
          "minimum": 0,
          "description": "Image height in pixels"
        },
        "ext": {
          "type": "string",
          "description": "File extension without dot"
        },
        "alt_text": {
          "type": "string",
          "description": "Accessibility text for the image"
        },
        "placement": {
          "$ref": "#/$defs/ImagePlacement",
          "default": "auto"
        }
      },
      "additionalProperties": false
    },
    "StatZone": {
      "type": "object",
      "required": ["number", "label"],
      "properties": {
        "number": {
          "type": "string",
          "description": "The statistic value (e.g. '85%', '$2.5M')"
        },
        "label": {
          "type": "string",
          "description": "Description of the statistic"
        }
      },
      "additionalProperties": false
    },
    "StatsDashboardZones": {
      "type": "object",
      "required": ["type", "stats"],
      "properties": {
        "type": {
          "type": "string",
          "const": "stats_dashboard"
        },
        "stats": {
          "type": "array",
          "minItems": 1,
          "maxItems": 6,
          "items": {
            "$ref": "#/$defs/StatZone"
          }
        }
      },
      "additionalProperties": false
    },
    "CaseStudyZones": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "const": "case_study_full"
        },
        "company_name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "bullets": {
          "type": "string"
        },
        "quote": {
          "type": "string"
        },
        "attribution": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "Slide": {
      "type": "object",
      "required": ["number", "title", "body"],
      "properties": {
        "number": {
          "type": "integer",
          "minimum": 1,
          "description": "Slide number (1-based)"
        },
        "title": {
          "type": "string",
          "description": "Slide title text"
        },
        "body": {
          "type": "string",
          "description": "Slide body text"
        },
        "speaker_notes": {
          "type": "string",
          "description": "Speaker notes for the slide"
        },
        "content_type": {
          "$ref": "#/$defs/ContentType",
          "default": "auto"
        },
        "layout_hint": {
          "type": "string",
          "description": "Suggested layout category name"
        },
        "images": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/SlideImage"
          },
          "default": []
        },
        "zones": {
          "oneOf": [
            { "$ref": "#/$defs/StatsDashboardZones" },
            { "$ref": "#/$defs/CaseStudyZones" }
          ],
          "description": "Pre-parsed content zones for multi-zone layouts"
        },
        "extraction_notes": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "Warnings or notes from the extraction process"
        }
      },
      "additionalProperties": false
    }
  }
}
